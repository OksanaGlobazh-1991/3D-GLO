(()=>{"use strict";(function(e){const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),a=document.querySelector("#timer-seconds");function n(){const e=(new Date("10 september 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}n();let l=0;function r(){const e=n();t.textContent=e.hours,e.hours>0&&e.hours<10&&(t.textContent="0"+e.hours),o.textContent=e.minutes,e.minutes>0&&e.minutes<10&&(o.textContent="0"+e.minutes),a.textContent=e.seconds,e.seconds>0&&e.seconds<10&&(a.textContent="0"+e.seconds),e.timeRemaining<0&&(clearInterval(l),t.textContent="00",o.textContent="00",a.textContent="00")}r(),l=setInterval(r,1e3)})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{const o=t.target;o.closest("a")&&(e.style.transform="translate(-100%)"),o.closest(".menu")&&(e.style.transform&&"translate(-100%)"!==e.style.transform?e.style.transform="translate(-100%)":(e.style.transform="translate(0)",e.classList.toggle("active-menu"))),o||(e.style.display="none")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelectorAll(".popup-btn"),o=document.querySelector(".popup-content");let a=0;t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="block"}))}));let n,l=!1;const r=()=>{n=requestAnimationFrame(r),a++,a<50?o.style.left=a+"%":cancelAnimationFrame(n),e.clientWidth<768&&(o.style.left="50%",cancelAnimationFrame(n))};e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?(e.style.display="none",a=0):(o=o.closest(".popup-content"),o||(e.style.display="none",a=0))})),document.addEventListener("click",(()=>{l?(l=!1,cancelAnimationFrame(n)):(n=requestAnimationFrame(r),l=!0)}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let a=e.target;a=a.closest(".service-header-tab"),a&&t.forEach(((e,n)=>{e===a&&(e=>{for(let a=0;a<o.length;a++)e===a?(t[a].classList.add("active"),o[a].classList.remove("d-none")):(t[a].classList.remove("active"),o[a].classList.add("d-none"))})(n)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content");(()=>{const t=document.querySelector(".portfolio-dots");e.forEach(((e,o)=>{(e=document.createElement("li")).className="dot",0===o&&((e=document.createElement("li")).className="dot dot-active"),t.append(e)}))})();const o=document.querySelectorAll(".dot");let a,n=0;const l=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},c=()=>{l(e,n,"portfolio-item-active"),l(o,n,"dot-active"),n++,n>=e.length&&(n=0),r(e,n,"portfolio-item-active"),r(o,n,"dot-active")},s=(e=3e3)=>{a=setInterval(c,e)};t.addEventListener("click",(t=>{t.preventDefault();const a=t.target;a.matches(".portfolio-btn, .dot")&&(l(e,n,"portfolio-item-active"),l(o,n,"dot-active"),a.matches("#arrow-right")?n++:a.matches("#arrow-left")?n--:a.matches(".dot")&&o.forEach(((e,t)=>{e===a&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),r(e,n,"portfolio-item-active"),r(o,n,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(a)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s(1500)})(),(()=>{document.querySelectorAll(".command__photo").forEach((e=>{let t;e.addEventListener("mouseover",(e=>{t=e.target.src,e.target.src=e.target.dataset.img})),e.addEventListener("mouseout",(e=>{e.target.src=t}))})),document.querySelectorAll('input[name="user_name"]').forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яё ]+/g,"")})),e.addEventListener("blur",(()=>{e.value=e.value.replace(/[^а-яё\ ]+/gi,""),e.value=e.value.trim(),e.value=e.value.replace(/\s+/g," "),e.value=e.value.charAt(0).toUpperCase()+e.value.slice(1)}))}));const e=document.getElementById("form2-message");e.addEventListener("input",(()=>{e.value=e.value.replace(/[^?!,.а-яА-ЯёЁ0-9\s]+/g,"")})),e.addEventListener("blur",(()=>{e.value=e.value.replace(/[^\?\!\,\.\а-яА-ЯёЁ0-9\s]+/gi,""),e.value=e.value.trim(),e.value=e.value.replace(/\s+/g," ")})),document.querySelectorAll(".form-email").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^a-z-@_.!~*']+/g,"")})),e.addEventListener("blur",(()=>{e.value=e.value.replace(/[^a-z\-\@\_\.\!\~\*\']+/gi,""),e.value=e.value.trim(),e.value=e.value.replace(/\s+/g,"")}))})),document.querySelectorAll(".form-phone").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^0-9+]+/g,"")})),e.addEventListener("blur",(()=>{e.value=e.value.replace(/[^0-9\+]+/gi,""),e.value=e.value.trim(),e.value=e.value.replace(/\s+/g," ")}))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=t.querySelectorAll("input"),a=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),l=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),c=document.getElementById("total");o.forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^0-9]/g,"")}))})),t.addEventListener("change",(t=>{const o=t.target;(o.matches(".calc-type")||o.matches(".calc-square")||o.matches(".calc-day")||o.matches(".calc-count"))&&(()=>{let t=0,o=1,s=1;const u=a.options[a.selectedIndex].value,i=+n.value;r.value>1&&(o+=(r.value-1)/10),l.value&&l.value<5?s*=2:l.value&&l.value<10&&(s*=1.5),u&&i&&(t=Math.round(e*u*i*o*s)),c.textContent=t})()}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div");let o;t.style.cssText="font-size: 2rem; color: white";let a=0;e.forEach((e=>{e.addEventListener("submit",(n=>{n.preventDefault(),e.appendChild(t),t.textContent="Загрузка...";const l=new FormData(e);o={},l.forEach(((e,t)=>{o[t]=e})),[...e].forEach((e=>{e.value=""})),a(o).then((e=>{if(200!==e.status)throw new Error("status network not 200");console.log(e),t.textContent="Спасибо! Мы скоро с Вами свяжемся!"})).catch((e=>{t.textContent="Что то пошло не так...",console.error(e)}))}))})),a=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"})})()})();